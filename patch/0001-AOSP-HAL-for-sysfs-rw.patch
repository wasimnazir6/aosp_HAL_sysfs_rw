From 73399b93bf3c2843cd163911ef2ced0f1f010a36 Mon Sep 17 00:00:00 2001
From: Wasim Nazir <wasim.nazir@pathpartnertech.com>
Date: Mon, 4 Feb 2019 02:03:58 +0530
Subject: [PATCH] AOSP HAL for sysfs rw

Change-Id: Ia8f02ba49b840d8fab62c1e5554bbdb0b0be3626

diff --git a/ksysfs/2.0/Android.bp b/ksysfs/2.0/Android.bp
new file mode 100644
index 0000000..29b1cee
--- /dev/null
+++ b/ksysfs/2.0/Android.bp
@@ -0,0 +1,59 @@
+// This file is autogenerated by hidl-gen. Do not edit manually.
+
+filegroup {
+    name: "android.hardware.ksysfs@2.0_hal",
+    srcs: [
+        "IKsyshw.hal",
+    ],
+}
+
+genrule {
+    name: "android.hardware.ksysfs@2.0_genc++",
+    tools: ["hidl-gen"],
+    cmd: "$(location hidl-gen) -o $(genDir) -Lc++-sources -randroid.hardware:hardware/interfaces -randroid.hidl:system/libhidl/transport android.hardware.ksysfs@2.0",
+    srcs: [
+        ":android.hardware.ksysfs@2.0_hal",
+    ],
+    out: [
+        "android/hardware/ksysfs/2.0/KsyshwAll.cpp",
+    ],
+}
+
+genrule {
+    name: "android.hardware.ksysfs@2.0_genc++_headers",
+    tools: ["hidl-gen"],
+    cmd: "$(location hidl-gen) -o $(genDir) -Lc++-headers -randroid.hardware:hardware/interfaces -randroid.hidl:system/libhidl/transport android.hardware.ksysfs@2.0",
+    srcs: [
+        ":android.hardware.ksysfs@2.0_hal",
+    ],
+    out: [
+        "android/hardware/ksysfs/2.0/IKsyshw.h",
+        "android/hardware/ksysfs/2.0/IHwKsyshw.h",
+        "android/hardware/ksysfs/2.0/BnHwKsyshw.h",
+        "android/hardware/ksysfs/2.0/BpHwKsyshw.h",
+        "android/hardware/ksysfs/2.0/BsKsyshw.h",
+    ],
+}
+
+cc_library_shared {
+    name: "android.hardware.ksysfs@2.0",
+    defaults: ["hidl-module-defaults"],
+    generated_sources: ["android.hardware.ksysfs@2.0_genc++"],
+    generated_headers: ["android.hardware.ksysfs@2.0_genc++_headers"],
+    export_generated_headers: ["android.hardware.ksysfs@2.0_genc++_headers"],
+    vendor_available: true,
+    shared_libs: [
+        "libhidlbase",
+        "libhidltransport",
+        "libhwbinder",
+        "liblog",
+        "libutils",
+        "libcutils",
+    ],
+    export_shared_lib_headers: [
+        "libhidlbase",
+        "libhidltransport",
+        "libhwbinder",
+        "libutils",
+    ],
+}
diff --git a/ksysfs/2.0/Android.mk b/ksysfs/2.0/Android.mk
new file mode 100644
index 0000000..eafa124
--- /dev/null
+++ b/ksysfs/2.0/Android.mk
@@ -0,0 +1,76 @@
+# This file is autogenerated by hidl-gen. Do not edit manually.
+
+LOCAL_PATH := $(call my-dir)
+
+################################################################################
+
+include $(CLEAR_VARS)
+LOCAL_MODULE := android.hardware.ksysfs-V2.0-java
+LOCAL_MODULE_CLASS := JAVA_LIBRARIES
+
+intermediates := $(call local-generated-sources-dir, COMMON)
+
+HIDL := $(HOST_OUT_EXECUTABLES)/hidl-gen$(HOST_EXECUTABLE_SUFFIX)
+
+LOCAL_JAVA_LIBRARIES := \
+    android.hidl.base-V1.0-java \
+
+
+#
+# Build IKsyshw.hal
+#
+GEN := $(intermediates)/android/hardware/ksysfs/V2_0/IKsyshw.java
+$(GEN): $(HIDL)
+$(GEN): PRIVATE_HIDL := $(HIDL)
+$(GEN): PRIVATE_DEPS := $(LOCAL_PATH)/IKsyshw.hal
+$(GEN): PRIVATE_OUTPUT_DIR := $(intermediates)
+$(GEN): PRIVATE_CUSTOM_TOOL = \
+        $(PRIVATE_HIDL) -o $(PRIVATE_OUTPUT_DIR) \
+        -Ljava \
+        -randroid.hardware:hardware/interfaces \
+        -randroid.hidl:system/libhidl/transport \
+        android.hardware.ksysfs@2.0::IKsyshw
+
+$(GEN): $(LOCAL_PATH)/IKsyshw.hal
+	$(transform-generated-source)
+LOCAL_GENERATED_SOURCES += $(GEN)
+include $(BUILD_JAVA_LIBRARY)
+
+
+################################################################################
+
+include $(CLEAR_VARS)
+LOCAL_MODULE := android.hardware.ksysfs-V2.0-java-static
+LOCAL_MODULE_CLASS := JAVA_LIBRARIES
+
+intermediates := $(call local-generated-sources-dir, COMMON)
+
+HIDL := $(HOST_OUT_EXECUTABLES)/hidl-gen$(HOST_EXECUTABLE_SUFFIX)
+
+LOCAL_STATIC_JAVA_LIBRARIES := \
+    android.hidl.base-V1.0-java-static \
+
+
+#
+# Build IKsyshw.hal
+#
+GEN := $(intermediates)/android/hardware/ksysfs/V2_0/IKsyshw.java
+$(GEN): $(HIDL)
+$(GEN): PRIVATE_HIDL := $(HIDL)
+$(GEN): PRIVATE_DEPS := $(LOCAL_PATH)/IKsyshw.hal
+$(GEN): PRIVATE_OUTPUT_DIR := $(intermediates)
+$(GEN): PRIVATE_CUSTOM_TOOL = \
+        $(PRIVATE_HIDL) -o $(PRIVATE_OUTPUT_DIR) \
+        -Ljava \
+        -randroid.hardware:hardware/interfaces \
+        -randroid.hidl:system/libhidl/transport \
+        android.hardware.ksysfs@2.0::IKsyshw
+
+$(GEN): $(LOCAL_PATH)/IKsyshw.hal
+	$(transform-generated-source)
+LOCAL_GENERATED_SOURCES += $(GEN)
+include $(BUILD_STATIC_JAVA_LIBRARY)
+
+
+
+include $(call all-makefiles-under,$(LOCAL_PATH))
diff --git a/ksysfs/2.0/IKsyshw.hal b/ksysfs/2.0/IKsyshw.hal
new file mode 100644
index 0000000..94a9e24
--- /dev/null
+++ b/ksysfs/2.0/IKsyshw.hal
@@ -0,0 +1,5 @@
+package android.hardware.ksysfs@2.0;
+
+interface IKsyshw {
+    ksysfn(int32_t valueIn) generates (int32_t valueRet);
+};
diff --git a/ksysfs/2.0/default/Android.bp b/ksysfs/2.0/default/Android.bp
new file mode 100644
index 0000000..bf43a78
--- /dev/null
+++ b/ksysfs/2.0/default/Android.bp
@@ -0,0 +1,31 @@
+cc_library_shared {
+    name: "android.hardware.ksysfs@2.0-impl",
+        vendor_available: true,
+    srcs: [
+        "Ksyshw.cpp",
+    ],
+    shared_libs: [
+        "libhidlbase",
+        "libhidltransport",
+        "libutils",
+        "android.hardware.ksysfs@2.0",
+    ],
+}
+
+cc_binary {
+    name: "android.hardware.ksysfs@2.0-service",
+    defaults: ["hidl_defaults"],
+    proprietary: true,
+    relative_install_path: "hw",
+    srcs: ["service.cpp"],
+    init_rc: ["android.hardware.ksysfs@2.0-service.rc"],
+
+    shared_libs: [
+        "android.hardware.ksysfs@2.0",
+        "android.hardware.ksysfs@2.0-impl",
+        "libhidlbase",
+        "libhidltransport",
+        "liblog",
+        "libutils",
+    ],
+}
diff --git a/ksysfs/2.0/default/Ksyshw.cpp b/ksysfs/2.0/default/Ksyshw.cpp
new file mode 100644
index 0000000..75a41b7
--- /dev/null
+++ b/ksysfs/2.0/default/Ksyshw.cpp
@@ -0,0 +1,49 @@
+#undef PASS_THROUGH_METHOD
+#define SYSFS_CHECK
+#define SYSPATH	"/sys/class/backlight/pwm-backlight.0/brightness"
+
+#include "Ksyshw.h"
+
+namespace android {
+namespace hardware {
+namespace ksysfs {
+namespace V2_0 {
+namespace implementation {
+
+// Methods from IKsyshw follow.
+Return<int32_t> Ksyshw::ksysfn(int32_t valueIn) {
+#ifdef SYSFS_CHECK
+    // TODO implement
+    int result = -1;
+    FILE *file;
+	file = fopen(SYSPATH, "w");
+    if (!file) {
+        return result;
+    }
+    fprintf(file, "%d", valueIn);
+    fclose(file);
+	return valueIn;
+#else
+    return valueIn + 10;
+#endif
+}
+
+#ifndef PASS_THROUGH_METHOD
+IKsyshw *Ksyshw::getInstance(void){
+  return new Ksyshw();
+}
+#endif
+
+// Methods from ::android::hidl::base::V1_0::IBase follow.
+
+#ifdef PASS_THROUGH_METHOD
+IKsyshw* HIDL_FETCH_IKsyshw(const char* /* name */) {
+    return new Ksyshw();
+}
+#endif
+
+}  // namespace implementation
+}  // namespace V2_0
+}  // namespace ksysfs
+}  // namespace hardware
+}  // namespace android
diff --git a/ksysfs/2.0/default/Ksyshw.h b/ksysfs/2.0/default/Ksyshw.h
new file mode 100644
index 0000000..c1b99bd
--- /dev/null
+++ b/ksysfs/2.0/default/Ksyshw.h
@@ -0,0 +1,39 @@
+#ifndef ANDROID_HARDWARE_KSYSFS_V2_0_KSYSHW_H
+#define ANDROID_HARDWARE_KSYSFS_V2_0_KSYSHW_H
+
+#include <android/hardware/ksysfs/2.0/IKsyshw.h>
+#include <hidl/MQDescriptor.h>
+#include <hidl/Status.h>
+
+namespace android {
+namespace hardware {
+namespace ksysfs {
+namespace V2_0 {
+namespace implementation {
+
+using ::android::hardware::hidl_array;
+using ::android::hardware::hidl_memory;
+using ::android::hardware::hidl_string;
+using ::android::hardware::hidl_vec;
+using ::android::hardware::Return;
+using ::android::hardware::Void;
+using ::android::sp;
+
+struct Ksyshw : public IKsyshw {
+    // Methods from IKsysw follow.
+    Return<int32_t> ksysfn(int32_t valueIn) override;
+
+    // Methods from ::android::hidl::base::V1_0::IBase follow.
+    static IKsyshw* getInstance(void);
+};
+
+// FIXME: most likely delete, this is only for passthrough implementations
+// extern "C" IKsyshw* HIDL_FETCH_IKsyshw(const char* name);
+
+}  // namespace implementation
+}  // namespace V2_0
+}  // namespace ksysfs
+}  // namespace hardware
+}  // namespace android
+
+#endif  // ANDROID_HARDWARE_KSYSFS_V2_0_KSYSHW_H
diff --git a/ksysfs/2.0/default/android.hardware.ksysfs@2.0-service.rc b/ksysfs/2.0/default/android.hardware.ksysfs@2.0-service.rc
new file mode 100644
index 0000000..e69de29
diff --git a/ksysfs/2.0/default/service.cpp b/ksysfs/2.0/default/service.cpp
new file mode 100644
index 0000000..62d8378
--- /dev/null
+++ b/ksysfs/2.0/default/service.cpp
@@ -0,0 +1,44 @@
+#undef PASS_THROUGH_METHOD
+
+#define LOG_TAG "android.hardware.ksysfs@2.0-service"
+
+#include <android/hardware/ksysfs/2.0/IKsyshw.h>
+#include <hidl/LegacySupport.h>
+
+using android::hardware::ksysfs::V2_0::IKsyshw;
+
+#ifdef PASS_THROUGH_METHOD
+using android::hardware::defaultPassthroughServiceImplementation;
+
+int main() {
+    return defaultPassthroughServiceImplementation<ISimphw>("ksysfs");
+}
+#endif /* PASS_THROUGH_METHOD */
+
+#ifndef PASS_THROUGH_METHOD
+#include "Ksyshw.h"
+
+using android::hardware::ksysfs::V2_0::implementation::Ksyshw;
+using android::hardware::configureRpcThreadpool;
+using android::hardware::joinRpcThreadpool;
+using android::sp;
+
+int main() {
+      int res;
+      android::sp<IKsyshw> ser = Ksyshw::getInstance();
+      ALOGE("Ksysfs main");
+      configureRpcThreadpool(1, true /*callerWillJoin*/);
+
+      if (ser != nullptr) {
+          res = ser->registerAsService();
+          if(res != 0)
+            ALOGE("Can't register instance of Ksysfs Hardware, nullptr");
+      } else {
+          ALOGE("Can't create instance of Ksysfs Hardware, nullptr");
+      }
+
+      joinRpcThreadpool();
+
+      return 0; // should never get here
+}
+#endif /* ! PASS_THROUGH_METHOD */
diff --git a/ksysfs/Android.bp b/ksysfs/Android.bp
new file mode 100644
index 0000000..00ffe32
--- /dev/null
+++ b/ksysfs/Android.bp
@@ -0,0 +1,5 @@
+// This is an autogenerated file, do not edit.
+subdirs = [
+    "2.0",
+    "2.0/default",
+]
diff --git a/simple/2.0/Android.bp b/simple/2.0/Android.bp
deleted file mode 100644
index 282da00..0000000
--- a/simple/2.0/Android.bp
+++ /dev/null
@@ -1,59 +0,0 @@
-// This file is autogenerated by hidl-gen. Do not edit manually.
-
-filegroup {
-    name: "android.hardware.simple@2.0_hal",
-    srcs: [
-        "ISimphw.hal",
-    ],
-}
-
-genrule {
-    name: "android.hardware.simple@2.0_genc++",
-    tools: ["hidl-gen"],
-    cmd: "$(location hidl-gen) -o $(genDir) -Lc++-sources -randroid.hardware:hardware/interfaces -randroid.hidl:system/libhidl/transport android.hardware.simple@2.0",
-    srcs: [
-        ":android.hardware.simple@2.0_hal",
-    ],
-    out: [
-        "android/hardware/simple/2.0/SimphwAll.cpp",
-    ],
-}
-
-genrule {
-    name: "android.hardware.simple@2.0_genc++_headers",
-    tools: ["hidl-gen"],
-    cmd: "$(location hidl-gen) -o $(genDir) -Lc++-headers -randroid.hardware:hardware/interfaces -randroid.hidl:system/libhidl/transport android.hardware.simple@2.0",
-    srcs: [
-        ":android.hardware.simple@2.0_hal",
-    ],
-    out: [
-        "android/hardware/simple/2.0/ISimphw.h",
-        "android/hardware/simple/2.0/IHwSimphw.h",
-        "android/hardware/simple/2.0/BnHwSimphw.h",
-        "android/hardware/simple/2.0/BpHwSimphw.h",
-        "android/hardware/simple/2.0/BsSimphw.h",
-    ],
-}
-
-cc_library_shared {
-    name: "android.hardware.simple@2.0",
-    defaults: ["hidl-module-defaults"],
-    generated_sources: ["android.hardware.simple@2.0_genc++"],
-    generated_headers: ["android.hardware.simple@2.0_genc++_headers"],
-    export_generated_headers: ["android.hardware.simple@2.0_genc++_headers"],
-    vendor_available: true,
-    shared_libs: [
-        "libhidlbase",
-        "libhidltransport",
-        "libhwbinder",
-        "liblog",
-        "libutils",
-        "libcutils",
-    ],
-    export_shared_lib_headers: [
-        "libhidlbase",
-        "libhidltransport",
-        "libhwbinder",
-        "libutils",
-    ],
-}
diff --git a/simple/2.0/Android.mk b/simple/2.0/Android.mk
deleted file mode 100644
index 51e6e8a..0000000
--- a/simple/2.0/Android.mk
+++ /dev/null
@@ -1,76 +0,0 @@
-# This file is autogenerated by hidl-gen. Do not edit manually.
-
-LOCAL_PATH := $(call my-dir)
-
-################################################################################
-
-include $(CLEAR_VARS)
-LOCAL_MODULE := android.hardware.simple-V2.0-java
-LOCAL_MODULE_CLASS := JAVA_LIBRARIES
-
-intermediates := $(call local-generated-sources-dir, COMMON)
-
-HIDL := $(HOST_OUT_EXECUTABLES)/hidl-gen$(HOST_EXECUTABLE_SUFFIX)
-
-LOCAL_JAVA_LIBRARIES := \
-    android.hidl.base-V1.0-java \
-
-
-#
-# Build ISimphw.hal
-#
-GEN := $(intermediates)/android/hardware/simple/V2_0/ISimphw.java
-$(GEN): $(HIDL)
-$(GEN): PRIVATE_HIDL := $(HIDL)
-$(GEN): PRIVATE_DEPS := $(LOCAL_PATH)/ISimphw.hal
-$(GEN): PRIVATE_OUTPUT_DIR := $(intermediates)
-$(GEN): PRIVATE_CUSTOM_TOOL = \
-        $(PRIVATE_HIDL) -o $(PRIVATE_OUTPUT_DIR) \
-        -Ljava \
-        -randroid.hardware:hardware/interfaces \
-        -randroid.hidl:system/libhidl/transport \
-        android.hardware.simple@2.0::ISimphw
-
-$(GEN): $(LOCAL_PATH)/ISimphw.hal
-	$(transform-generated-source)
-LOCAL_GENERATED_SOURCES += $(GEN)
-include $(BUILD_JAVA_LIBRARY)
-
-
-################################################################################
-
-include $(CLEAR_VARS)
-LOCAL_MODULE := android.hardware.simple-V2.0-java-static
-LOCAL_MODULE_CLASS := JAVA_LIBRARIES
-
-intermediates := $(call local-generated-sources-dir, COMMON)
-
-HIDL := $(HOST_OUT_EXECUTABLES)/hidl-gen$(HOST_EXECUTABLE_SUFFIX)
-
-LOCAL_STATIC_JAVA_LIBRARIES := \
-    android.hidl.base-V1.0-java-static \
-
-
-#
-# Build ISimphw.hal
-#
-GEN := $(intermediates)/android/hardware/simple/V2_0/ISimphw.java
-$(GEN): $(HIDL)
-$(GEN): PRIVATE_HIDL := $(HIDL)
-$(GEN): PRIVATE_DEPS := $(LOCAL_PATH)/ISimphw.hal
-$(GEN): PRIVATE_OUTPUT_DIR := $(intermediates)
-$(GEN): PRIVATE_CUSTOM_TOOL = \
-        $(PRIVATE_HIDL) -o $(PRIVATE_OUTPUT_DIR) \
-        -Ljava \
-        -randroid.hardware:hardware/interfaces \
-        -randroid.hidl:system/libhidl/transport \
-        android.hardware.simple@2.0::ISimphw
-
-$(GEN): $(LOCAL_PATH)/ISimphw.hal
-	$(transform-generated-source)
-LOCAL_GENERATED_SOURCES += $(GEN)
-include $(BUILD_STATIC_JAVA_LIBRARY)
-
-
-
-include $(call all-makefiles-under,$(LOCAL_PATH))
diff --git a/simple/2.0/ISimphw.hal b/simple/2.0/ISimphw.hal
deleted file mode 100644
index 0d3f1fb..0000000
--- a/simple/2.0/ISimphw.hal
+++ /dev/null
@@ -1,5 +0,0 @@
-package android.hardware.simple@2.0;
-
-interface ISimphw {
-    simpfn(int32_t valueIn) generates (int32_t valueRet);
-};
diff --git a/simple/2.0/default/Android.bp b/simple/2.0/default/Android.bp
deleted file mode 100644
index 51f76e8..0000000
--- a/simple/2.0/default/Android.bp
+++ /dev/null
@@ -1,31 +0,0 @@
-cc_library_shared {
-    name: "android.hardware.simple@2.0-impl",
-	vendor_available: true,
-    srcs: [
-        "Simphw.cpp",
-    ],
-    shared_libs: [
-        "libhidlbase",
-        "libhidltransport",
-        "libutils",
-        "android.hardware.simple@2.0",
-    ],
-}
-
-cc_binary {
-    name: "android.hardware.simple@2.0-service",
-    defaults: ["hidl_defaults"],
-    proprietary: true,
-    relative_install_path: "hw",
-    srcs: ["service.cpp"],
-    init_rc: ["android.hardware.simple@2.0-service.rc"],
-
-    shared_libs: [
-        "android.hardware.simple@2.0",
-        "android.hardware.simple@2.0-impl",
-        "libhidlbase",
-        "libhidltransport",
-        "liblog",
-        "libutils",
-    ],
-}
diff --git a/simple/2.0/default/Simphw.cpp b/simple/2.0/default/Simphw.cpp
deleted file mode 100644
index b669c80..0000000
--- a/simple/2.0/default/Simphw.cpp
+++ /dev/null
@@ -1,49 +0,0 @@
-#undef PASS_THROUGH_METHOD
-#define SYSFS_CHECK
-#define SYSPATH	"/sys/class/backlight/pwm-backlight.0/brightness"
-
-#include "Simphw.h"
-
-namespace android {
-namespace hardware {
-namespace simple {
-namespace V2_0 {
-namespace implementation {
-
-// Methods from ISimphw follow.
-Return<int32_t> Simphw::simpfn(int32_t valueIn) {
-#ifdef SYSFS_CHECK
-    // TODO implement
-    int result = -1;
-    FILE *file;
-	file = fopen(SYSPATH, "w");
-    if (!file) {
-        return result;
-    }
-    fprintf(file, "%d", valueIn);
-    fclose(file);
-	return valueIn;
-#else
-    return valueIn + 10;
-#endif
-}
-
-#ifndef PASS_THROUGH_METHOD
-ISimphw *Simphw::getInstance(void){
-  return new Simphw();
-}
-#endif
-
-// Methods from ::android::hidl::base::V1_0::IBase follow.
-
-#ifdef PASS_THROUGH_METHOD
-ISimphw* HIDL_FETCH_ISimphw(const char* /* name */) {
-    return new Simphw();
-}
-#endif
-
-}  // namespace implementation
-}  // namespace V2_0
-}  // namespace simple
-}  // namespace hardware
-}  // namespace android
diff --git a/simple/2.0/default/Simphw.h b/simple/2.0/default/Simphw.h
deleted file mode 100644
index ce44b5a..0000000
--- a/simple/2.0/default/Simphw.h
+++ /dev/null
@@ -1,39 +0,0 @@
-#ifndef ANDROID_HARDWARE_SIMPLE_V2_0_SIMPHW_H
-#define ANDROID_HARDWARE_SIMPLE_V2_0_SIMPHW_H
-
-#include <android/hardware/simple/2.0/ISimphw.h>
-#include <hidl/MQDescriptor.h>
-#include <hidl/Status.h>
-
-namespace android {
-namespace hardware {
-namespace simple {
-namespace V2_0 {
-namespace implementation {
-
-using ::android::hardware::hidl_array;
-using ::android::hardware::hidl_memory;
-using ::android::hardware::hidl_string;
-using ::android::hardware::hidl_vec;
-using ::android::hardware::Return;
-using ::android::hardware::Void;
-using ::android::sp;
-
-struct Simphw : public ISimphw {
-    // Methods from ISimphw follow.
-    Return<int32_t> simpfn(int32_t valueIn) override;
-
-    // Methods from ::android::hidl::base::V1_0::IBase follow.
-	static ISimphw* getInstance(void);
-};
-
-// FIXME: most likely delete, this is only for passthrough implementations
-// extern "C" ISimphw* HIDL_FETCH_ISimphw(const char* name);
-
-}  // namespace implementation
-}  // namespace V2_0
-}  // namespace simple
-}  // namespace hardware
-}  // namespace android
-
-#endif  // ANDROID_HARDWARE_SIMPLE_V2_0_SIMPHW_H
diff --git a/simple/2.0/default/android.hardware.simple@2.0-service.rc b/simple/2.0/default/android.hardware.simple@2.0-service.rc
deleted file mode 100644
index 6464efb..0000000
--- a/simple/2.0/default/android.hardware.simple@2.0-service.rc
+++ /dev/null
@@ -1,5 +0,0 @@
-service simphwserv /vendor/bin/hw/android.hardware.simple@2.0-service
-    class hal
-    user root
-    group root
-	seclabel u:r:su:s0
diff --git a/simple/2.0/default/service.cpp b/simple/2.0/default/service.cpp
deleted file mode 100644
index 71ae887..0000000
--- a/simple/2.0/default/service.cpp
+++ /dev/null
@@ -1,44 +0,0 @@
-#undef PASS_THROUGH_METHOD
-
-#define LOG_TAG "android.hardware.simple@2.0-service"
-
-#include <android/hardware/simple/2.0/ISimphw.h>
-#include <hidl/LegacySupport.h>
-
-using android::hardware::simple::V2_0::ISimphw;
-
-#ifdef PASS_THROUGH_METHOD
-using android::hardware::defaultPassthroughServiceImplementation;
-
-int main() {
-    return defaultPassthroughServiceImplementation<ISimphw>("simple");
-}
-#endif /* PASS_THROUGH_METHOD */
-
-#ifndef PASS_THROUGH_METHOD
-#include "Simphw.h"
-
-using android::hardware::simple::V2_0::implementation::Simphw;
-using android::hardware::configureRpcThreadpool;
-using android::hardware::joinRpcThreadpool;
-using android::sp;
-
-int main() {
-      int res;
-      android::sp<ISimphw> ser = Simphw::getInstance();
-      ALOGE("simp main");
-      configureRpcThreadpool(1, true /*callerWillJoin*/);
-
-      if (ser != nullptr) {
-          res = ser->registerAsService();
-          if(res != 0)
-            ALOGE("Can't register instance of SimpleHardware, nullptr");
-      } else {
-          ALOGE("Can't create instance of SimpleHardware, nullptr");
-      }
-
-      joinRpcThreadpool();
-
-      return 0; // should never get here
-}
-#endif /* ! PASS_THROUGH_METHOD */
diff --git a/simple/Android.bp b/simple/Android.bp
deleted file mode 100644
index 00ffe32..0000000
--- a/simple/Android.bp
+++ /dev/null
@@ -1,5 +0,0 @@
-// This is an autogenerated file, do not edit.
-subdirs = [
-    "2.0",
-    "2.0/default",
-]
-- 
2.7.4

